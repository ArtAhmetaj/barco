# File formats

## Log segment

The log segment is composed of compressed chunks.

### Chunk

```
+----------+---------------+---------------+----------+
| length   |  start offset | record length | head crc |
| (uint32) |    (uint64)   |    (uint32)   | (int32)  |
+----------+---------------+---------------+----------+
| compressed payload (zstd crc)                       |
| +-------------------------------------------------+ |
| | record                                          | |
| | +------------------------+--------------------+ | |
| | | length (uint32) | timestamp micros (uint64) | | |
| | +------------------------+--------------------+ | |
| | |             body (bytes)                    | | |
| | +---------------------------------------------+ | |
| +-------------------------------------------------+ |
|                                                     |
| +-------------------------------------------------+ |
| | record...                                       | |
| +-------------------------------------------------+ |
|                                                     |
| .                                                   |
| .                                                   |
| .                                                   |
|                                                     |
| +-------------------------------------------------+ |
| | alignment (zeroed bytes)                        | |
| +-------------------------------------------------+ |
+-----------------------------------------------------+
```
